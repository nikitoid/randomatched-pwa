// https://nuxt.com/docs/api/configuration/nuxt-config
export default defineNuxtConfig({
  compatibilityDate: "2025-07-15",
  devtools: { enabled: true },
  ssr: false,
  modules: ["@nuxt/ui", "@vite-pwa/nuxt"],
  css: ["~/assets/css/main.css"],
  // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ PWA
  pwa: {
    // üì¶ –ú–∞–Ω–∏—Ñ–µ—Å—Ç ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –º–∏–Ω–∏–º—É–º
    manifest: {
      name: "Randomatched",
      short_name: "RM App",
      description: "–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∏–≥—Ä—ã Unmatched",
      theme_color: "#000000",
      background_color: "#ffffff",
      display: "standalone",
      scope: "/",
      start_url: "/",
      icons: [
        {
          src: "/icons/icon-192.png",
          sizes: "192x192",
          type: "image/png",
        },
        {
          src: "/icons/icon-512.png",
          sizes: "512x512",
          type: "image/png",
        },
        {
          src: "/icons/icon-512.png",
          sizes: "512x512",
          type: "image/png",
          purpose: "any maskable",
        },
      ],
      shortcuts: [
        {
          name: "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å",
          url: "/",
          description: "–ë—ã—Å—Ç—Ä–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è",
        },
      ],
    },

    // ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–∏—Å-–≤–æ—Ä–∫–µ—Ä–∞
    workbox: {
      // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
      navigateFallback: "/", // üîë –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–∞ HTML ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é

      // üì¶ –ì–ª–æ–±–∞–ª—å–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ CacheFirst
      globPatterns: [
        "**/*.{js,css,html,json,ico,png,jpg,jpeg,gif,svg,webp,woff,woff2,ttf,eot}",
      ],

      // ‚öôÔ∏è –°—Ç—Ä–∞—Ç–µ–≥–∏—è CacheFirst ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–∏–Ω—Ü–∏–ø –æ—Ñ—Ñ–ª–∞–π–Ω-—Ä–∞–±–æ—Ç—ã
      runtimeCaching: [
        {
          urlPattern: ({ url }) => url.origin === self.location.origin,
          handler: "CacheFirst",
          options: {
            cacheName: "static-assets-v1", // –£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è ‚Äî –≤–∞–∂–Ω–æ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
            expiration: {
              maxEntries: 200, // –ú–∞–∫—Å–∏–º—É–º 200 —Ñ–∞–π–ª–æ–≤ –≤ –∫—ç—à–µ
              maxAgeSeconds: 60 * 60 * 24 * 365, // 1 –≥–æ–¥ ‚Äî –æ—á–µ–Ω—å –¥–æ–ª–≥–æ!
            },
            cacheableResponse: {
              statuses: [0, 200], // –†–∞–∑—Ä–µ—à–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç—ã —Å –∫–æ–¥–∞–º–∏ 0 (cors) –∏ 200
            },
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—Ç—å —Ö–µ—à –∫ URL –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
            // –≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–ª–∞–≥–æ–¥–∞—Ä—è Vite –∏ –µ–≥–æ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—é –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤
          },
        },
      ],

      // üõ† –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ API (–µ—Å–ª–∏ –µ—Å—Ç—å)
      // –ï—Å–ª–∏ —É —Ç–µ–±—è –µ—Å—Ç—å —Å—Ç–∞—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, /api/posts), –º–æ–∂–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –∏—Ö
      /*
      runtimeCaching: [
        {
          urlPattern: ({ url }) => url.origin === self.location.origin,
          handler: 'CacheFirst',
          options: {
            cacheName: 'static-assets-v1',
            expiration: { maxEntries: 200, maxAgeSeconds: 31536000 },
            cacheableResponse: { statuses: [0, 200] }
          }
        },
        {
          urlPattern: /^https:\/\/your-api\.com\/api\//,
          handler: 'CacheFirst',
          options: {
            cacheName: 'api-data-v1',
            expiration: { maxEntries: 50, maxAgeSeconds: 86400 }, // 1 –¥–µ–Ω—å
            cacheableResponse: { statuses: [0, 200] }
          }
        }
      ]
      */
    },

    // üîî –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π prompt —É—Å—Ç–∞–Ω–æ–≤–∫–∏
    registerType: "autoUpdate",
    devOptions: {
      enabled: true, // –û—Ç–∫–ª—é—á–∏—Ç—å –≤ dev-—Ä–µ–∂–∏–º–µ (–Ω–µ –Ω—É–∂–Ω–æ)
      suppressWarnings: true,
    },

    // üìÅ –ü—É—Ç—å –∫ –∏–∫–æ–Ω–∫–∞–º ‚Äî –æ–Ω–∏ –±—É–¥—É—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ –ª–µ–∂–∞—Ç –≤ /public/icons/
    client: {
      installPrompt: true, // üîë –í–∫–ª—é—á–∏—Ç—å prompt —É—Å—Ç–∞–Ω–æ–≤–∫–∏
      // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫, –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞
      // onRegister: async (register) => {
      //   console.log('Service worker registered:', register)
      // }
    },
  },

  // üåê –î–ª—è –ª—É—á—à–µ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å –º–æ–±–∏–ª—å–Ω—ã–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏
  app: {
    head: {
      meta: [
        { charset: "utf-8" },
        { name: "viewport", content: "width=device-width, initial-scale=1" },
        { name: "description", content: "–ú–æ–µ PWA –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ" },
      ],
      link: [{ rel: "icon", type: "image/x-icon", href: "/favicon.ico" }],
    },
  },
});
